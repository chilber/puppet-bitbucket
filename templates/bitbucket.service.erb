[Unit]
Description=Atlassian Bitbucket Server Service
After=syslog.target network.target

[Service]
Type=forking
Environment="JAVA_HOME=<%= scope.lookupvar('bitbucket::javahome') %>"
PIDFile=<%= scope.lookupvar('bitbucket::webappdir') %>/work/catalina.pid
User=<%= scope.lookupvar('bitbucket::user') %>
ExecStart=<%= scope.lookupvar('bitbucket::webappdir') %>/bin/start-<%= scope.lookupvar('bitbucket::product') %>.sh
ExecStop=<%= scope.lookupvar('bitbucket::webappdir') %>/bin/stop-<%= scope.lookupvar('bitbucket::product') %>.sh

[Install]
WantedBy=multi-user.target
